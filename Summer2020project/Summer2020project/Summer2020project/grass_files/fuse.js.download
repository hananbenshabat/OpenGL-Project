!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";var t={tenantId:"DGKSPXNV53",fuse_tenant:"publift",fuse_cdn:"//cdn.fuseplatform.net/publift/tags/",fuse_breakpoints:{m:960,s:600,xs:0},fuse_settings:{adblock:!1,lazy:!1,responsive:!0,prebid:{enabled:!0,breakpoint_options:{xs:{enabled:!0,timeout:1e3},s:{enabled:!0,timeout:1e3},m:{enabled:!0,timeout:1e3}},defaultTimeout:1e3},quickstart:!1,headerbidding:1e3,confiant:!1,cmp:!1,blockthrough:!1,amazonUam:{enabled:!1},identity:{enabled:!1}},fuse_blocked_url:[],fuse_id:2106,fuse_slots:[{id:"22051677112",slot:"71161633/TXTR_textures/home_lrec",sizes:[[120,600],[160,600],[300,600]],sizeMapping:{m:[[300,600],[160,600],[120,600]],s:[],xs:[],xl:[],l:[]},attributes:{lazy:!1,refresh:30,headerbidding:!1,adblock:!1},customLazy:{l:!1,xs:!1,s:!1,xl:!1,m:!1},bids:[{bidder:"appnexus",params:{placementId:"19662948"}},{bidder:"pubmatic",params:{publisherId:"156762",adSlot:"71161633/TXTR_textures/home_lrec@300x600"},labelAny:["m"]},{bidder:"pubmatic",params:{publisherId:"156762",adSlot:"71161633/TXTR_textures/home_lrec@160x600"},labelAny:["m"]},{bidder:"pubmatic",params:{publisherId:"156762",adSlot:"71161633/TXTR_textures/home_lrec@120x600"},labelAny:["m"]},{bidder:"ix",params:{siteId:"538036",size:[120,600]},labelAny:["m"]},{bidder:"ix",params:{siteId:"538036",size:[160,600]},labelAny:["m"]},{bidder:"ix",params:{size:[300,600],siteId:"538036"},labelAny:["m"]},{bidder:"criteo",params:{publisherSubId:"22051677112_1486316_160x600",size:"160x600",zoneId:"1486316"},labelAny:["m"]},{bidder:"criteo",params:{zoneId:"1486322",size:"300x600",publisherSubId:"22051677112_1486322_300x600"},labelAny:["m"]},{bidder:"triplelift",params:{inventoryCode:"Textures_StandardDisplay",size:"120x600"},labelAny:["m"]},{bidder:"triplelift",params:{inventoryCode:"Textures_StandardDisplay",size:"160x600"},labelAny:["m"]},{bidder:"triplelift",params:{inventoryCode:"Textures_StandardDisplay",size:"300x600"},labelAny:["m"]}]},{id:"22051681588",slot:"71161633/TXTR_textures/home_hrec",sizes:[[728,90],[970,250],[970,90]],sizeMapping:{s:[],xs:[],m:[[970,250],[970,90],[728,90]]},attributes:{refresh:!1,lazy:!1,headerbidding:!1,adblock:!1},bids:[{bidder:"appnexus",params:{placementId:"19662947"}},{bidder:"pubmatic",params:{publisherId:"156762",adSlot:"71161633/TXTR_textures/home_hrec@728x90"},labelAny:["m"]},{bidder:"pubmatic",params:{publisherId:"156762",adSlot:"71161633/TXTR_textures/home_hrec@970x250"},labelAny:["m"]},{bidder:"pubmatic",params:{publisherId:"156762",adSlot:"71161633/TXTR_textures/home_hrec@970x90"},labelAny:["m"]},{bidder:"ix",params:{siteId:"538036",size:[728,90]},labelAny:["m"]},{bidder:"ix",params:{size:[970,250],siteId:"538036"},labelAny:["m"]},{bidder:"ix",params:{size:[970,90],siteId:"538036"},labelAny:["m"]},{bidder:"criteo",params:{zoneId:"1486324",publisherSubId:"22051681588_1486324_728x90",size:"728x90"},labelAny:["m"]},{bidder:"criteo",params:{publisherSubId:"22051681588_1486326_970x250",zoneId:"1486326",size:"970x250"},labelAny:["m"]},{bidder:"criteo",params:{publisherSubId:"22051681588_1486325_970x90",zoneId:"1486325",size:"970x90"},labelAny:["m"]},{bidder:"triplelift",params:{inventoryCode:"Textures_StandardDisplay",size:"728x90"},labelAny:["m"]},{bidder:"triplelift",params:{inventoryCode:"Textures_StandardDisplay",size:"970x250"},labelAny:["m"]},{bidder:"triplelift",params:{size:"970x90",inventoryCode:"Textures_StandardDisplay"},labelAny:["m"]}]},{id:"22051681591",slot:"71161633/TXTR_textures/home_mrec",sizes:[[300,250],[336,280]],sizeMapping:{m:[[300,250],[336,280]],xs:[],s:[]},attributes:{refresh:!1,headerbidding:!1,lazy:!1,adblock:!1},bids:[{bidder:"appnexus",params:{placementId:"19662949"}},{bidder:"pubmatic",params:{publisherId:"156762",adSlot:"71161633/TXTR_textures/home_mrec@300x250"},labelAny:["m"]},{bidder:"pubmatic",params:{publisherId:"156762",adSlot:"71161633/TXTR_textures/home_mrec@336x280"},labelAny:["m"]},{bidder:"ix",params:{size:[300,250],siteId:"538036"},labelAny:["m"]},{bidder:"ix",params:{siteId:"538036",size:[336,280]},labelAny:["m"]},{bidder:"criteo",params:{publisherSubId:"22051681591_1486321_300x250",zoneId:"1486321",size:"300x250"},labelAny:["m"]},{bidder:"criteo",params:{size:"336x280",publisherSubId:"22051681591_1486323_336x280",zoneId:"1486323"},labelAny:["m"]},{bidder:"triplelift",params:{inventoryCode:"Textures_StandardDisplay",size:"300x250"},labelAny:["m"]},{bidder:"triplelift",params:{size:"336x280",inventoryCode:"Textures_StandardDisplay"},labelAny:["m"]}]}],supported_sizes:{m:[[300,600],[160,600],[120,600],[970,250],[970,90],[728,90],[300,250],[336,280]],s:[],xs:[],xl:[],l:[]},fuse_industry:["IAB19"]};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function s(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach(function(e){var t,n;t=o,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})}return o}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var l=void 0;Array.prototype.forEach||(Array.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<l.length;n++)e.call(t,l[n],n,l)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),o=n.length>>>0;if(0==o)return!1;for(var i,r,t=0|t,a=Math.max(0<=t?t:o-Math.abs(t),0);a<o;){if((i=n[a])===(r=e)||"number"==typeof i&&"number"==typeof r&&isNaN(i)&&isNaN(r))return!0;a++}return!1}}),"undefined"!=typeof window&&window.NodeList&&!window.NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);function d(e,t){var n;e.hasOwnProperty("url")&&((n=U.document.createElement("script")).async=!0,n.type="text/javascript","function"==typeof t&&(n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()}),n.src="https:".concat(e.url).concat(e.file),(e=U.document.getElementsByTagName("script")[0]).parentNode.insertBefore(n,e))}function g(t,n,o){function i(){var e=Date.now()-c;e<n&&0<=e?r=setTimeout(i,n-e):(r=null,o||(u=t.apply(s,a),r||(s=a=null)))}var r,a,s,c,u;return function(){s=this,a=arguments,c=Date.now();var e=o&&!r;return r=r||setTimeout(i,n),e&&(u=t.apply(s,a),s=a=null),u}}function e(e){G.addEventListener("resize",g(e||function(){F.log("resized",G.innerWidth,G.innerHeight)},500))}function p(e){var n,o=W.fuse_breakpoints,i=e||G.innerWidth;return Object.keys(o).forEach(function(e){var t=o[e];t<i&&(!n||i<n)&&(n={size:t,name:e})}),n}function f(){return H.performance.timing.navigationStart}function b(){return X}function h(e){return!0===e?0:e}function m(e,t){return t=t.name,e.hasOwnProperty("customLazy")&&e.customLazy.hasOwnProperty(t)&&!1!==e.customLazy[t]?e.customLazy[t]:e.attributes.lazy}function y(e,t,n){if(!e)return!1;var o,i,r=e.getBoundingClientRect(),a=H.document.hidden,s=H.innerWidth||H.document.documentElement.clientWidth,c=H.innerHeight||H.document.documentElement.clientHeight,u=h(n),l=(l=s,o=c,i=u,e=t?t/100:1,s=(n=r).top,c=n.bottom,u=n.left,t=n.right,r=n.width,n=n.height*e,e*=r,0<=s+n+i&&0<=u+e&&c-n<=o&&t-e<=l);return!a&&l}function v(e){if(!e)return J.error("missing parameter fuseSlot");e.matched=e.matched||0,e.matched+=1}function w(t){if(!t)return J.error("missing parameter fuseSlotID");if("string"!=typeof t)return J.error("fuseSlotId should be of type string");var n=RegExp("".concat(t.toLowerCase(),"$"));return c(X.filter(function(e){return e.id===t||n.test(e.slot.toLowerCase())}),1)[0]||!1}function S(e){return e.filter(function(e){return!Y(e)})}function A(){var e=ye.host;return e.substring(e.length-40,e.length)}function k(){var e=ye.pathname;return e.substring(e.length-40,e.length)}function I(){var e=ye.search;return e.substring(e.length-40,e.length)}function P(){for(var e=[],t=ye.pathname.split("/"),n=0;n<t.length;n+=1)t[n].length&&-1===t[n].indexOf(".")&&e.push(t[n]);return e}function C(e){if(D&&D.cmd)return D.cmd.push(e);he.log("googletag or googletag.cmd not exists")}function T(t){if(D&&t){var e=D.pubads().getSlots();return Array.isArray(t)?e.filter(function(e){return 0<=t.indexOf(e.getSlotElementId())}):e.filter(function(e){return e.getSlotElementId()===t})}}function _(e,t){C(function(){D.pubads().setTargeting(e,t)})}function N(){var t,n,o;_("fuse_profanity",(t=ye.host,n=ye.pathname,o="false",W.fuse_blocked_url&&W.fuse_blocked_url.forEach(function(e){-1<e.indexOf(t+n)&&(o="true")}),o)),_("fuse_site",A()),_("fuse_path",k()),_("fuse_query",I()),_("fuse_category",P()),_("fuse_industry",W.fuse_industry);var e="false";375<=me.screen.width&&(e="true"),_("inskin_yes",e)}var O,D,E="2.14.1",M="2",L=function(){function t(e){i(this,t),this.console=e.console,this.logName=e.logName,this.isInDebugMode=e.isInDebugMode}return n(t,[{key:"callLogMethod",value:function(e){if(this.isInDebugMode){for(var t=arguments.length,n=new Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];n[0]="[".concat(this.logName,"]-").concat(n[0]),this.console[e].apply(null,n)}}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.callLogMethod("error",t)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.callLogMethod("warn",t)}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.callLogMethod("log",t)}}]),t}(),z=new(function(){function e(){i(this,e);try{this.location=this.getBrowserWindowObject().top.location}catch(e){this.location=this.getBrowserWindowObject().location}}return n(e,[{key:"getWindowLocation",value:function(){return this.location}},{key:"getPackageVersion",value:function(){return E}},{key:"getPackageMajorVersion",value:function(){return M}},{key:"getEnvironmentType",value:function(){return"undefined"!=typeof module&&module.exports?"node":"browser"}},{key:"isNodeEnvironment",value:function(){return"node"===this.getEnvironmentType()}},{key:"getBrowserWindowObject",value:function(){return window}},{key:"getPrebidGlobal",value:function(){return this.getBrowserWindowObject().fusePbjs||(this.getBrowserWindowObject().fusePbjs={que:[]}),this.getBrowserWindowObject().fusePbjs}},{key:"getQueryParam",value:function(t){return c(this.getWindowLocation().search.split(/[?&]/).filter(function(e){return""!==e}).map(function(e){return e.split("=")}).filter(function(e){return e[0]===t}),1)[0]||[]}},{key:"isInDebugMode",value:function(){return this.isNodeEnvironment()||"true"===this.getQueryParam("fuse_debug")[1]}},{key:"getMainLogPrefix",value:function(){return"FUSE"}},{key:"getAdSlotQuerySelectorElement",value:function(){return"div"}},{key:"getTargetAdSlotNodeIdPrefix",value:function(){return"fuse-slot-"}},{key:"getTargetAdSlotNodeMainClassName",value:function(){return"fuse-slot"}},{key:"getLogger",value:function(){if(this.logger)return this.logger;var e=this.isInDebugMode();return this.logger=new L({isInDebugMode:e,console:this.getBrowserWindowObject().console,logName:this.getMainLogPrefix()}),this.logger}}]),e}()),x=function(){function e(){i(this,e)}return n(e,[{key:"code",value:function(){return"1---"}}]),e}(),j=new(function(){function e(){i(this,e)}return n(e,[{key:"getCcpaPrivacyStringCoder",value:function(){return new x}},{key:"getUamPubID",value:function(){return t.fuse_settings.amazonUam&&t.fuse_settings.amazonUam.enabled?t.fuse_settings.amazonUam.pubID:""}},{key:"getUamAdServer",value:function(){return"googletag"}}]),e}()),W=t,B={gpt:{name:"Google Publisher Tag",url:"//securepubads.g.doubleclick.net/tag/js/",file:"gpt.js"},prebid:{name:"Prebid.org",url:W.fuse_cdn||"//cdn.publift.com/fuse/tag/",file:"prebid.js"},adblock:{name:"Criteo AdBlock",url:"//static.criteo.net/js/ld/",file:"publishertag.js"},confiant:{name:"Confiant",url:"//clarium.global.ssl.fastly.net/gpt/a/",file:"wrap.js?v2_1"},blockthrough:{name:"Blockthrough",url:"//publift-com.videoplayerhub.com/",file:"galleryplayer.js"}},U=z.getBrowserWindowObject(),R=z.getWindowLocation(),F=z.getLogger(),G=z.getBrowserWindowObject(),V={watchForBreakpoints:function(t){var n=G.innerWidth,o=p(n).size;e(function(){n=G.innerWidth;var e=p(n).size;return e!==o?(o=e,F.log("Window resized to %spx which crossed a breakpoint: New breakpoint is %spx",n,e),t(!0)):t(!1)})},setResizeListener:e,getCurrentBreakpoint:p},J=z.getLogger(),Q=z.getAdSlotQuerySelectorElement(),q=z.getTargetAdSlotNodeMainClassName(),H=z.getBrowserWindowObject(),X=JSON.parse(JSON.stringify(W.fuse_slots)),Y=function(e){return Array.isArray(e)?"fluid"===e[0]:"fluid"===e},K=function(e,t){var n;return J.log("[SLOTS]: Building the fuse slot for ".concat(e.code," "),new Date-f()),t.setAttribute("data-fuse-code","".concat(e.code)),t.setAttribute("data-fuse-slot","".concat(e.slot)),H.document.getElementById(e.code)||((n=H.document.createElement("div")).setAttribute("id","".concat(e.code)),n.className=q,t.appendChild(n)),t},Z=y,$=function(e,t,n){return!!t.attributes.hasOwnProperty("lazy")&&(!1!==t.attributes.lazy&&!y(e,50,m(t,n)))},ee=function(){for(var e=H.document.querySelectorAll("div.fuse-custom-skin"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])},te=S,ne=function(e){return e.map(function(e){return Y(e)&&Array.isArray(e)?e[0]:e})},oe=function(t){var e=V.getCurrentBreakpoint().name,n=c(b().filter(function(e){return e.id===t})||[],1)[0];return n?n.sizeMapping&&n.sizeMapping[e]?S(n.sizeMapping[e]):(J.warn('Fuse slot "'.concat(t,'" does not have sizemaps configured, sizeless prebid units may act strangely.')),S(n.sizes||[])):[]},ie=f,re=function(){return H.fusetag.que||[]},ae=function(e){var t=H.document.querySelectorAll("".concat(Q,'[data-fuse-code="').concat(e,'"]'));return 1<t.length&&J.warn("There should be only one div with the data-fuse-code of ".concat(e)),t[0]},se=function(e){e=H.document.querySelectorAll("".concat(Q,'[data-fuse="').concat(e,'"]'));return e[e.length-1]},ce=function(e){if(e.prebid&&e.prebid.enabled&&e.prebid.breakpoint_options){var t=V.getCurrentBreakpoint().name,t=e.prebid.breakpoint_options[t];if(t)return t}return{enabled:0<e.headerbidding,timeout:e.headerbidding}},ue=w,le=function(){return O},de=function(){return Array.prototype.slice.call(H.document.querySelectorAll("".concat(Q,"[data-fuse]")))},ge=m,pe=function(e){if(!e)return J.error("missing parameter fuseSlotNode");var t=e.getAttribute("data-fuse"),n=w(t);return n||J.warn("[SLOTS]: There is no FuseSlot set up in the account matching the id ".concat(t)),n&&(v(n),t=e.getAttribute("data-targeting-key"),e=e.getAttribute("data-targeting-value"),t&&t.length&&e&&e.length&&(n.targeting||(n.targeting={}),n.targeting[t]=e)),n},fe=function(e){return O=e},be=B.gpt,he=z.getLogger(),me=z.getBrowserWindowObject(),ye=z.getWindowLocation(),ve=N,we=function(){me.googletag&&me.googletag._loadStarted_?he.log("[LOAD]: 3. GPT v".concat(D.getVersion()," is already on the page, skip loading another copy")):d(be,function(){he.log("[LOAD]: 3. GPT ".concat(me.googletag&&me.googletag._loadStarted_?"v".concat(D.getVersion()," is loaded and ready"):"not loaded")),he.log("[TIME]: time in ms it took GPT to load",new Date-ie())})},Se=function(e){var t,n,o,i,r,a=D.defineSlot(e.slot,e.sizes,e.code),s=Math.ceil(100*Math.random());return a&&(o=a,(i=e).sizeMapping&&0!==Object.keys(i.sizeMapping).length&&(r=D.sizeMapping(),Object.keys(i.sizeMapping).forEach(function(e){var t=W.fuse_breakpoints[e],n=i.sizeMapping[e];void 0!==t&&(he.log("[EVENT] Setting breakpoint for slot ".concat(i.slot," for size ").concat(e," with breakpoint ").concat(t," and mapping ").concat(n)),r.addSize([t,0],ne(n)))}),o.defineSizeMapping(r.build())),t=a=o,(n=e).targeting&&Object.keys(n.targeting).length&&Object.keys(n.targeting).forEach(function(e){t.setTargeting(e,n.targeting[e])}),a=t,s=10<s?"optimized":s%10==0?"benchmark":"exploration".concat(s%10),!1!==W.fuse_settings.adomik&&a.setTargeting("publift_mv_testing",s),a.addService(D.pubads())),a},Ae=function(){return D=me.googletag||(me.googletag={cmd:[]})},ke=_,Ie=C,Pe=function(e){if(D){e=!e&&0<D.pubads().getSlots().length?D.pubads().getSlots()[D.pubads().getSlots().length-1].getSlotElementId():e?e.code:null;return he.log("[BIDS]: Initialising DFP call at",new Date-(le()||ie())),D.display(e)}},Ce=function(e){var t=e?T(e):null;return he.log("[BIDS]: Making DFP call for ".concat(e&&e.length?JSON.stringify(e):"all units")),D.pubads().refresh(t)},Te=function(){D.pubads().disableInitialLoad(),D.pubads().collapseEmptyDivs(!0),D.pubads().setCentering(!0),D.pubads().enableSingleRequest(),N()},_e=function(t){D.pubads().addEventListener("slotRenderEnded",function(e){he.log("[BIDS]: Adserver responded ".concat(e.isEmpty?"without":"with"," creative for ").concat(e.slot.getSlotElementId())),he.log("[TIME]: time in ms it took for adserver to respond",new Date-(le()||ie())),t({hasCreative:!e.isEmpty,slotId:e.slot.getSlotElementId()})})},Ne=function(){D.pubads().addEventListener("impressionViewable",function(e){he.log("[EVENT]: AD_IMPRESSION_VIEW for ".concat(e.slot.getSlotElementId()),new Date-(le()||ie()))})},Oe=function(){me.googletag.enableServices()},De=function(){me.googletag.pubads().disableInitialLoad(),me.googletag.pubads().setRequestNonPersonalizedAds(1)},Ee=function(){function t(e){i(this,t),this.slots={},this.logger=e.logger,this.getMatchedFuseSlot=e.getMatchedFuseSlot,this.destroySlotsFunc=e.destroySlotsFunc}return n(t,[{key:"add",value:function(e,t){e&&"string"==typeof e||this.logger.error("invalid key."),t||this.logger.error("invalid slot object passed.");e=e.toLowerCase();Array.isArray(this.slots[e])||(this.slots[e]=[]),this.slots[e].push(t)}},{key:"purgeAll",value:function(){Object.keys(this.slots).forEach(this.purge.bind(this))}},{key:"purge",value:function(e){var t;e&&"string"==typeof e&&(t=e.toLowerCase(),(e=this.getMatchedFuseSlot(t))&&(e.targeting={}),e=this.slots[t],Array.isArray(e)&&(this.destroySlotsFunc(e),this.slots[t]=[]))}},{key:"getSlots",value:function(e){if(e&&"string"==typeof e&&Array.isArray(this.slots[e.toLowerCase()]))return this.slots[e.toLowerCase()]}},{key:"setSlotTargetingById",value:function(t,n,o){var e,i=this;t&&"string"==typeof t&&((e=this.getMatchedFuseSlot(t))&&(e.targeting||(e.targeting={}),e.targeting[n]=o),(e=i.slots[t.toLowerCase()])&&Array.isArray(e)&&e.length&&e.forEach(function(e){try{e.setTargeting(n,o)}catch(e){i.logger.error("error occurred while individually setTargeting for key - ".concat(t,"."),e.message,e.stack)}}))}}]),t}(),Me=function(){function t(e){i(this,t),this.logger=e.logger,this.targetAdSlotNodeIdPrefix=e.targetAdSlotNodeIdPrefix,this.packageVersion=e.packageVersion,this.browserWindow=e.browserWindow,this.adSlotRegistry=e.adSlotRegistry,this.isInDebugMode=e.isInDebugMode}return n(t,[{key:"getActiveModules",value:function(){return["no-module"]}}]),t}(),Le=function(){function t(e){i(this,t),this.pubID=e.pubID,this.adServer=e.adServer,this.logger=e.logger,this.browserWindow=e.browserWindow,this.gdpr={},this.params={}}return n(t,[{key:"loadAmazonUam",value:function(n,o,e,t,i,r,a){function s(e,t){o[n]._Q.push([e,t])}o[n]||(o[n]={init:function(){s("i",arguments)},fetchBids:function(){s("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(r=e.createElement(t)).async=!0,r.src=i,(a=e.getElementsByTagName(t)[0]).parentNode.insertBefore(r,a))}},{key:"applyCCPA",value:function(e){this.params={us_privacy:e},this.logger.log("[CONSENT]: CCPA config passed onto UAM")}},{key:"applyGDPR",value:function(){this.gdpr={cmpTimeout:1e4},this.logger.log("[CONSENT]: GDPR config passed onto UAM")}},{key:"getUamConfig",value:function(){var e={pubID:this.pubID,adServer:this.adServer};return Object.getOwnPropertyNames(this.gdpr).length&&(e.gdpr=this.gdpr),Object.getOwnPropertyNames(this.params).length&&(e.params=this.params),e}},{key:"load",value:function(){if(this.loadAmazonUam("apstag",this.browserWindow,this.browserWindow.document,"script","//c.amazon-adsystem.com/aax2/apstag.js"),!this.browserWindow.apstag)return this.logger.error("[LOAD]: 0. UAM script loading failed.")}},{key:"init",value:function(e){this.browserWindow.apstag.init(this.getUamConfig()),this.logger.log("[LOAD]: 0. UAM script loaded"),this.logger.log("[TIME]: time in ms it took UAM script to load",new Date-e)}},{key:"makeBids",value:function(e,t){var n=this;this.browserWindow.apstag.fetchBids({slots:e},function(e){n.browserWindow.googletag.cmd.push(function(){n.browserWindow.apstag.setDisplayBids(),t(e)})})}}]),t}(),ze=function(){function o(e){i(this,o),this.logger=e.logger,this.browserWindow=e.browserWindow,this.consentUIPrompt=e.consentUIPrompt,this.uspTries=0,this.uspTriesLimit=3,this.createUspStub()}return n(o,[{key:"checkForCCPA",value:function(n){var o=this;this.browserWindow.__uspapi("uspPing",1,function(e,t){t&&e.mode.includes("USP")&&e.jurisdiction.includes(e.location.toUpperCase())?(o.logger.log("[CONSENT]: CCPA Region"),o.browserWindow.__uspapi("setUspDftData",1,function(e,t){o.logger.log("[CONSENT]: Setting up data for USP API",JSON.stringify(e),t),o.browserWindow.__uspapi("getUSPData",1,function(e,t){return t?void n({applies:!0,privacyString:e.uspString}):(o.logger.log("[CONSENT]: Failed retrieving USP data use default instead"),n({applies:!0,privacyString:"1---"}))})})):n({applies:!1})})}},{key:"setGDPRConsentPrompt",value:function(){var e=this;this.consentUIPrompt.setup("Privacy Settings",function(){e.browserWindow.__tcfapi("displayConsentUi",2,function(){return e.logger.log("[CONSENT]: GDPR Consent UI displayed")})})}},{key:"setCCPAConsentPrompt",value:function(){var e=this;this.consentUIPrompt.setup("Do Not Sell My Data",function(){e.browserWindow.__uspapi("displayUspUi")})}},{key:"cmpLoaded",value:function(t){var n=!1;setTimeout(function(){if(!n)return t(!1)},1e3),this.browserWindow.__tcfapi("ping",2,function(e){return n=!0,e&&e.cmpLoaded?t(!0):t(!1)})}},{key:"getConsentData",value:function(n){this.browserWindow.__tcfapi("getTCData",2,function(e,t){return t&&e?e.gdprApplies?o.CONSENT_RECEIVED_STATES.includes(e.eventStatus.toLowerCase())?n({consentReceived:!0,personalisedAdsConsent:e.purpose.consents[2]&&e.purpose.consents[3],googlePersonalisedAdsConsent:e.purpose.consents[2]&&e.purpose.consents[3],gdprApplies:e.gdprApplies}):n({consentReceived:!1,gdprApplies:e.gdprApplies}):n({consentReceived:!0,gdprApplies:!1}):n({consentReceived:!1})})}},{key:"createUspStub",value:function(){function t(){var e=arguments;r(i.__uspapi)!==t?setTimeout(function(){void 0!==i.__uspapi&&i.__uspapi.apply(i.__uspapi,e)},400):(o.warn("[CONSENT] USP is still in stub mode. Calling to ".concat(e[0]," API will be unsuccessful")),"function"==typeof e[2]&&e[2](void 0,!1))}var e,n=this,o=this.logger,i=this.browserWindow;void 0===i.__uspapi&&(i.__uspapi=t,e=setInterval(function(){n.uspTries++,i.__uspapi===t&&n.uspTries<n.uspTriesLimit?o.warn("USP is not accessible"):clearInterval(e)},300))}}]),o}();ze.CONSENT_RECEIVED_STATES=["useractioncomplete","tcloaded"];function xe(e){var t=e/.835;return Je.log("[BIDS]: Adjusting IX bid from Net to Gross from ".concat(e," to ").concat(t)),t}function je(){var e={};return Ze(e),$e(e),Ye(e,W),et(e,W),Ke(e),tt(e),e}var We=function(){function t(e){i(this,t),this.logger=e.logger,this.browserWindow=e.browserWindow,this.consentUIPrompt=e.consentUIPrompt}return n(t,[{key:"checkForCCPA",value:function(n){var o=this;this.browserWindow.__cmp("uspPing",null,function(e,t){t&&e&&e.location&&"ca"===e.location.toLowerCase()?(o.logger.log("[CONSENT]: CCPA Region"),o.browserWindow.__cmp("getUSPData",1,function(e,t){return t?void n({applies:!0,privacyString:e.uspString}):(o.logger.log("[CONSENT]: Failed retrieving USP data use default instead"),n({applies:!0,privacyString:"1---"}))})):n({applies:!1})})}},{key:"setGDPRConsentPrompt",value:function(){var e=this;this.consentUIPrompt.setup("Privacy Settings",function(){e.browserWindow.__cmp("displayConsentUi")})}},{key:"setCCPAConsentPrompt",value:function(){var e=this;this.consentUIPrompt.setup("Do Not Sell My Data",function(){e.browserWindow.__cmp("displayUspUi")})}},{key:"cmpLoaded",value:function(t){var n=!1;setTimeout(function(){if(!n)return t(!1)},1e3),this.browserWindow.__cmp("ping",2,function(e){return n=!0,e&&e.cmpLoaded?t(!0):t(!1)})}},{key:"getConsentData",value:function(n){var o=this;this.browserWindow.__cmp("getVendorConsents",null,function(t,e){e&&t?o.browserWindow.__cmp("getGooglePersonalization",function(e){n({consentReceived:!0,personalisedAdsConsent:t.purposeConsents&&t.purposeConsents[2]&&t.purposeConsents[3],googlePersonalisedAdsConsent:e&&e.googlePersonalizationData&&1===e.googlePersonalizationData.consentValue,gdprApplies:t.gdprApplies})}):n({consentReceived:!1,gdprApplies:t&&t.gdprApplies})})}}]),t}(),Be=function(){function t(e){i(this,t),this.options=e}return n(t,[{key:"getVersion",value:function(e){var t;switch(e){case 1:t=new We(this.options);break;case 2:t=new ze(this.options);break;default:t=new We(this.options)}return t}}]),t}(),Ue=function(){function t(e){i(this,t),this.browserWindow=e.browserWindow,this.versionLoader=e.versionLoader,this.logger=e.logger,this.versionNumber=1,this.version=null,this.gdprApplies=!1,this.ccpaApplies=!1,this.ccpaPrivacyString=null,this.stubFunctionsGenerator=e.stubFunctionsGenerator,this.scriptLoader=e.scriptLoader,this.consentUIPrompt=e.consentUIPrompt}return n(t,[{key:"init",value:function(){this.scriptLoader.load(),this.stubFunctionsGenerator.generate(),this.loadVersion()}},{key:"loadVersion",value:function(){this.checkForVersion1(),this.checkForVersion2()}},{key:"versionHandler",value:function(e){var t=this,n=e.found,e=e.versionNumber;null===this.version&&(n?this.setVersion(e):setTimeout(function(){t.loadVersion()},500))}},{key:"checkForVersion1",value:function(){var n=this;this.browserWindow.__cmp("ping",null,function(e,t){n.versionHandler({found:t,versionNumber:1})})}},{key:"checkForVersion2",value:function(){var t=this;this.browserWindow.__tcfapi("ping",null,function(e){t.versionHandler({found:e.cmpLoaded,versionNumber:2})})}},{key:"setVersion",value:function(e){this.versionNumber=e,this.version=this.versionLoader.getVersion(e)}},{key:"checkForCCPA",value:function(e){this.version.checkForCCPA(e)}},{key:"cmpLoaded",value:function(e){if(this.logger.log("[CONSENT]: Check if CMP has been loaded"),null===this.version)return e(!1);this.version.cmpLoaded(e)}},{key:"getConsentData",value:function(e){this.version.getConsentData(e)}},{key:"setGDPR",value:function(e){this.gdprApplies=e}},{key:"setCCPA",value:function(e){this.ccpaApplies=e}},{key:"setPrivacyString",value:function(e){this.ccpaPrivacyString=e}},{key:"setGDPRConsentPrompt",value:function(){this.version.setGDPRConsentPrompt()}},{key:"setCCPAConsentPrompt",value:function(){this.version.setCCPAConsentPrompt()}},{key:"setNonPrivacyRegionsPrompt",value:function(){this.consentUIPrompt.setup("You are outside the CCPA jurisdiction.")}}]),t}(),Re=function(){function o(e,t,n){i(this,o),this.browserWindow=e,this.domSelector=t||"div[data-fuse-privacy-tool]",this.elementId=n||"fuse-privacy-tool"}return n(o,[{key:"setup",value:function(e,t){var n,o=this.browserWindow.document.querySelector(this.domSelector);o&&(t?((n=document.createElement("a")).href="javascript:void(0)",n.id=this.elementId,n.innerHTML=e,n.addEventListener("click",t),o.appendChild(n)):o.textContent=e)}}]),o}(),Fe=function(){function t(e){i(this,t),this.logger=e.logger,this.browserWindow=e.browserWindow}return n(t,[{key:"generate",value:function(){this.createStubFunctionV1(),this.createStubFunctionV2()}},{key:"createStubFunctionV1",value:function(){var t;void 0===this.browserWindow.__cmp&&(t=this.browserWindow,this.browserWindow.__cmp=function(){var e=arguments;"object"!==r(t.__cmp.a)&&setTimeout(function(){t.__cmp.apply(t.__cmp,e)},400)})}},{key:"createStubFunctionV2",value:function(){function e(){for(var e,i="__tcfapiLocator",n=[],r=a.browserWindow,t=function e(){var t,n=r.document,o=!!r.frames[i];return o||(n.body?((t=n.createElement("iframe")).style.cssText="display:none",t.name=i,n.body.appendChild(t)):setTimeout(e,5)),!o};r;){try{if(r.frames[i]){e=r;break}}catch(e){"{}"!==JSON.stringify(e)&&a.logger.error("[CONSENT]:",JSON.stringify(e))}if(r===a.browserWindow.top)break;r=r.parent}e||(a.logger.log(" !cmpFrame "),t(),r.__tcfapi=function(){var e,t=arguments;if(!t.length)return n;"setGdprApplies"===t[0]?3<t.length&&2===t[2]&&"boolean"==typeof t[3]&&(e=t[3],"function"==typeof t[2]&&t[2]("set",!0)):"ping"===t[0]?(e={gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"},"function"==typeof t[2]&&t[2](e)):n.push(t)},r.addEventListener("message",function(n){var o="string"==typeof n.data,e={};try{e=o?JSON.parse(n.data):n.data}catch(e){"{}"!==JSON.stringify(e)&&a.logger.error("[CONSENT]:",JSON.stringify(e))}var i=e.__tcfapiCall;i&&a.browserWindow.__tcfapi(i.command,i.version,function(e,t){t={__tcfapiReturn:{returnValue:e,success:t,callId:i.callId}};o&&(t=JSON.stringify(t)),n.source.postMessage(t,"*")},i.parameter)},!1))}var a=this;"undefined"!=typeof module?module.exports=e:e()}}]),t}(),Ge=function(){function t(e){i(this,t),this.browserWindow=e.browserWindow}return n(t,[{key:"load",value:function(){var e=new XMLHttpRequest,t=this.browserWindow.document.location.hostname,n=this.browserWindow.document.createElement("script"),o=this.browserWindow.document.getElementsByTagName("script")[0],i=(new Date).getTime(),r="https://quantcast.mgr.consensu.org".concat("/choice/","PRrmquD1Ggcb1","/",t,"/choice.js").concat("?timestamp=",i);e.onreadystatechange=function(){var e;4===this.readyState&&(n.async=!0,n.type="text/javascript",200===this.status?n.src=r:(e="https://quantcast.mgr.consensu.org".concat("/choice.js"),n.src=e,r=e),o.parentNode.insertBefore(n,o))},e.open("GET",r,!0),e.send()}}]),t}(),Ve=new(function(){function e(){i(this,e)}return n(e,[{key:"getPackageVersion",value:function(){return z.getPackageVersion()}},{key:"getPackageMajorVersion",value:function(){return z.getPackageMajorVersion()}},{key:"isInDebugMode",value:function(){return z.isInDebugMode()}},{key:"getAdSlotQuerySelectorElement",value:function(){return z.getAdSlotQuerySelectorElement()}},{key:"getTargetAdSlotNodeIdPrefix",value:function(){return z.getTargetAdSlotNodeIdPrefix()}},{key:"getBrowserWindowObject",value:function(){return z.getBrowserWindowObject()}},{key:"getTargetAdSlotNodeMainClassName",value:function(){return z.getTargetAdSlotNodeMainClassName()}},{key:"getPrebidGlobal",value:function(){return z.getPrebidGlobal()}},{key:"getLogger",value:function(){return z.getLogger()}},{key:"getGptSlotRegistry",value:function(){var t=this;return new Ee({logger:this.getLogger(),getMatchedFuseSlot:function(e){return ue(e)},pushToGoogleTagQueueFunc:function(e){return e},destroySlotsFunc:function(e){return Ie(function(){t.getBrowserWindowObject().googletag.destroySlots(e)})}})}},{key:"getFuseTag",value:function(){return new Me({logger:this.getLogger(),targetAdSlotNodeIdPrefix:this.getTargetAdSlotNodeIdPrefix(),packageVersion:this.getPackageVersion(),browserWindow:this.getBrowserWindowObject(),adSlotRegistry:this.getGptSlotRegistry(),isInDebugMode:this.isInDebugMode()})}},{key:"getUamPubID",value:function(){return j.getUamPubID()}},{key:"getUamAdServer",value:function(){return j.getUamAdServer()}},{key:"getAmazonUam",value:function(){return new Le({pubID:this.getUamPubID(),adServer:this.getUamAdServer(),logger:this.getLogger(),browserWindow:this.getBrowserWindowObject()})}},{key:"getCmpVersionLoader",value:function(){return new Be({logger:this.getLogger(),browserWindow:this.getBrowserWindowObject(),consentUIPrompt:new Re(this.getBrowserWindowObject())})}},{key:"getStubFunctionsGenerator",value:function(){return new Fe({logger:this.getLogger(),browserWindow:this.getBrowserWindowObject()})}},{key:"getCmpScriptLoader",value:function(){return new Ge({browserWindow:this.getBrowserWindowObject()})}},{key:"getConsentManger",value:function(){return new Ue({browserWindow:this.getBrowserWindowObject(),logger:this.getLogger(),versionLoader:this.getCmpVersionLoader(),stubFunctionsGenerator:this.getStubFunctionsGenerator(),scriptLoader:this.getCmpScriptLoader(),consentUIPrompt:new Re(this.getBrowserWindowObject())})}}]),e}()),Je=Ve.getLogger(),Qe=Ve.getPackageMajorVersion(),qe=Ve.getBrowserWindowObject(),He=Ve.getPrebidGlobal(),Xe=B.prebid,Ye=function(e,t){t=1<arguments.length&&void 0!==t?t:{};"function"!=typeof qe.__tcfapi&&"function"!=typeof qe.__cmp&&!t.cmp||(e.consentManagement={gdpr:{cmpApi:"iab",timeout:1e4},usp:{cmpApi:"iab",timeout:100}},"function"==typeof qe.__tcfapi?e.consentManagement.gdpr.defaultGdprScope=!0:e.consentManagement.gdpr.allowAuctionWithoutConsent=!1,Je.log("[CONSENT]: prebid consent management module in place"))},Ke=function(e){e.userSync={filterSettings:{iframe:{bidders:"*",filter:"include"}}}},Ze=function(e){e.priceGranularity={buckets:[{max:3,increment:.01,precision:2},{max:10,increment:.1,precision:2},{max:50,increment:1,precision:2},{max:100,increment:10,precision:2}]}},$e=function(e){e.enableSendAllBids=!1},et=function(t,n){var o;n&&n.fuse_settings&&n.fuse_settings.responsive&&(o=null,t.sizeConfig=[],Object.keys(n.fuse_breakpoints).forEach(function(e){t.sizeConfig.push({mediaQuery:"(min-width:".concat(n.fuse_breakpoints[e],"px)").concat(o?" and (max-width: ".concat(o-1,"px)"):""),sizesSupported:n.supported_sizes[e],labels:[e]}),o=n.fuse_breakpoints[e]}))},tt=function(e){e.bidderSettings={ix:{bidCpmAdjustment:xe}}},nt={loadPrebidLibrary:function(){if(!He||!He.libLoaded){var t,e=s({},Xe);return"true"===(t="local_prebid",(c(R.search.split(/[?&]/).filter(function(e){return""!==e}).map(function(e){return e.split("=")}).filter(function(e){return e[0]===t}),1)[0]||[])[1])?(Je.warn("[LOAD]: local version of prebid in use"),e.url="./"):e.url+="".concat(Qe,"/").concat(W.fuse_id,"/"),d(e,function(){Je.log("[LOAD]: 3. Prebid ".concat(He&&He.libLoaded?"".concat(He.version," is loaded and ready"):"not loaded")),Je.log("[TIME]: time in ms it took Prebid to load",new Date-ie()),qe.pbjs&&qe.pbjs.libLoaded?qe.pbjs.renderAd||(qe.pbjs.renderAd=He.renderAd):qe.pbjs=He})}Je.log("[LOAD]: 3. Prebid ".concat(He.version," is already loaded skip loading it again"))},pushToPrebidQue:function(e){He&&He.que&&He.que.push(e)},setPrebidAdUnits:function(e){var t=oe(e.id);Je.log("[BIDS]: Setting Prebid ad units for ".concat(e.code," with sizes ").concat(JSON.stringify(t))),He.addAdUnits({code:e.code,mediaTypes:{banner:{sizes:t}},bids:e.bids})},getPrebidDefaultConfig:je,setPrebidConfig:function(e){var t;return e=e||je(),Je.log("[BIDS]: Setting Prebid Config"),He.setConfig(e),(t=W).prebid_analytics&&t.prebid_analytics.length&&t.prebid_analytics.forEach(function(e,t){0!==t&&Je.warn("\n          [ANALYTICS]: Having more than one analytics provider active may affect page performance.\n        "),He.enableAnalytics(e),Je.log("[ANALYTICS]: Analytics enabled for ".concat(e.provider))}),e}},ot=Ve.getBrowserWindowObject(),it={capture:!0,passive:!0},rt=function(n,o,i){ot.addEventListener("scroll",function e(){var t=V.getCurrentBreakpoint();Z(n,null,ge(o,t))&&(ge(o,t)||0===ge(o,t))&&(i(),ot.removeEventListener("scroll",e,it))},it)},at=Ve.getLogger(),st=Ve.getBrowserWindowObject(),ct=B.adblock,ut={loadAdBlocklLibrary:function(){return d(ct,function(){at.log("[LOAD]: 3. Adblock script loaded."),at.log("[TIME]: time in ms to load Adblock script",new Date-ie())})},createAdBlockObj:function(){return st.Criteo||(st.Criteo={events:[]})},buildAdBlockSlots:function(e,t){var n,o,i,r;0<t.querySelectorAll('[id^="crt"]').length||e.attributes&&e.attributes.adblock&&(i=st.document.createElement("DIV"),n=e.sizes&&0<e.sizes.length?"".concat(e.sizes[0][1],"px"):"100%",o={zoneid:Number(e.attributes.adblock),containerid:"crt-".concat(e.code),overrideZoneFloor:!1,height:n,callbacksuccess:function(e){log("[SLOTS]: Adblock slots ".concat(o.containerid," loaded")),log("[TIME]: time in ms it took Adblock Slot ".concat(o.containerid," to load"),new Date-ie()),e.target.parentNode.style.display="block"}},i.id=o.containerid,i.className="fuse-adblock",t.appendChild(i),i=o,st.Criteo?(r=i,st.Criteo.events.push(function(){at.log("[SLOTS]: Adblock slots ".concat(r.containerid," set up")),st.Criteo.DisplayAcceptableAdIfAdblocked(r),st.document.getElementById(r.containerid).style.height=r.height,st.document.getElementById(r.containerid).style.display="none"})):at.warn("You need to declare the global Criteo Object first"))}},lt=Ve.getLogger(),dt=Ve.getBrowserWindowObject();var gt={enable:function(){(dt._clrm||(dt._clrm={})).gpt={propertyId:"bR7_trg8Qo2LNRwdGIEOwoeDupQ",confiantCdn:"clarium.global.ssl.fastly.net",sandbox:0,mapping:"W3siaSI6MiwidCI6Int7b319Ont7d319eHt7aH19IiwicCI6MCwiRCI6MSwiciI6W119LHsiaSI6NiwidCI6Int7Y299fTp7e3d9fXh7e2h9fSIsInAiOjUwLCJEIjowLCJyIjpbeyJ0IjoiZXgiLCJzIjpudWxsLCJ2IjoiY28ifV19XQ==",activation:"|||Mzg5ODk4MDMz,|||MjM4MTU5MzYwMg==,|||MjM4MTAxNzU2Mg==,|||MjM4MTAxNzU2Mg==,|||MjM4MTAxNzQzMA==,|||MjM4MTAxNzU2Mg==,|||MjM4MTAxNzU2Mg==,|||MjM4MTAxNzQzMw==,|||MjM4MTAxNzU2Mg==,|||MjM4MTAxNzQzNg==,|||MjM4MTAxNzQzOQ==,|||MjU0MTE4ODU3NQ==,|||MjM4MTAxNzU2Mg==,|co|ex|MQ==",callback:function(){lt.log("[CONFIANT]",arguments)}},d(B.confiant,function(){lt.log("[LOAD]: 0. Confiant tag loaded"),lt.log("[TIME]: time in ms it took Confiant tag to load",new Date-ie())})}},pt=Ve.getLogger();var ft={enable:function(){d(B.blockthrough,function(){pt.log("[LOAD]: 0. Blockthrough tag loaded"),pt.log("[TIME]: time in ms it took Blockthrough tag to load",new Date-ie())})}};var bt=function(){function t(e){i(this,t),this.browserWindow=e.browserWindow,this.userIdentityGlobal=e.userIdentityGlobal,this.placementId=e.placementId}return n(t,[{key:"setup",value:function(){var e,t=this,n=this.browserWindow[this.userIdentityGlobal];n&&("object"===r(o=n)&&null!==o)&&(n.email||n.phoneNumber||n.emailHashes)?(e={placementID:this.placementId},n.email?e.email=n.email:n.phoneNumber?e.phoneNumber=n.phoneNumber:e.emailHashes=n.emailHashes):e={placementID:this.placementId,storageType:"localStorage",detectionType:"scrapeAndUrl",cssSelectors:["input[type=text]","input[type=email]"],detectionSubject:"all",urlParameter:"user_id",logging:"debug"};var o=document.createElement("script");o.src="https://ats.rlcdn.com/ats.js",o.onload=function(){t.browserWindow.ats.start(e)};n=this.browserWindow.document.getElementsByTagName("script")[0];n.parentNode.insertBefore(o,n)}},{key:"configPrebid",value:function(e){return e.userSync||(e.userSync={}),e.userSync.userIds=[{name:"identityLink",params:{pid:this.placementId},storage:{type:"cookie",name:"idl_env",expires:7}}],e}}]),t}(),ht=function(){function o(e,t){var n=this;i(this,o),this.log=t,this.registry={},e.forEach(function(e){n.registry[e]=[]})}return n(o,[{key:"on",value:function(e,t){return!!this.registry[e]&&(this.registry[e].push(t),!0)}},{key:"off",value:function(e,n){return!!this.registry[e]&&(this.registry[e].forEach(function(e,t){e===n&&(o=t)}),!(!o&&0!==o)&&(this.registry[e].splice(o,1),!0));var o}},{key:"once",value:function(e,t){function n(){t.apply(null,Array.prototype.slice.call(arguments)),o.off(e,n)}var o=this;return o.on(e,n)}},{key:"emit",value:function(e){if(!this.registry[e])return!1;var t=Array.prototype.slice.call(arguments);t.shift(),this.log("[EVENT] ".concat(e," triggered with ").concat(this.registry[e].length," in the registry")),this.registry[e].forEach(function(e){e.apply(null,t)})}}]),o}(),mt=Ve.getLogger(),yt=Ve.getTargetAdSlotNodeIdPrefix(),vt=Ve.getPackageVersion(),wt=Ve.isInDebugMode(),St=Ve.getPrebidGlobal(),At=Ve.getGptSlotRegistry(),kt=Ve.getBrowserWindowObject(),It=Ve.getAmazonUam(),Pt=Ve.getConsentManger(),Ct=t,Tt=Ct.fuse_settings;Tt.pageTargeting=[];var _t=kt.fusetag||(kt.fusetag={que:[]});_t.initialised=_t.initialised||!1,_t.states=_t.states||[{loaded:!0,ts:Date.now()}],wt&&(_t.version=vt);function Nt(){var e=Math.random().toString(16).slice(2);return Object.prototype.hasOwnProperty.call(Yt,e)?Nt():e}function Ot(e){Yt[e]={aps:!1,prebid:!1}}function Dt(e){Ce(e)}function Et(e,t){Tt.prebid.enabled&&Tt.amazonUam.enabled?Yt[t].aps&&Yt[t].prebid&&(Dt(e),delete Yt[t]):Dt(e)}function Mt(){return Gt}function Lt(){return Vt}function zt(){Object.keys(Jt).forEach(function(e){return clearInterval(Jt[e])}),Jt={}}function xt(e){var t=Nt();Ot(t);var n,o=e||Object.keys(Vt),i=ce(Tt);mt.log("[BIDS][".concat(t,"]: Going to refresh slots with Prebid options - enabled: ").concat(i.enabled," Amazon UAM - enabled: ").concat(Tt.amazonUam.enabled," -- timeout: ").concat(i.timeout)),i&&i.enabled||Tt.amazonUam.enabled?(i.enabled&&nt.pushToPrebidQue(function(){St&&St.adUnits&&(St.adUnits=St.adUnits.map(function(e){var t=Vt[e.code];if(!t)return e;t=oe(t.id);return e.mediaTypes&&e.mediaTypes.banner&&(e.mediaTypes.banner.sizes=t),e})),St.requestBids({timeout:i.timeout,bidsBackHandler:function(e){mt.log("[BIDS][".concat(t,"]: Prebid bid response for all"),JSON.stringify(e)),mt.log("[TIME][".concat(t,"]: time it took for Prebid bids to return"),new Date-(le()||ie())),St.setTargetingForGPTAsync(),ee(),Yt[t].prebid=!0,Et(o,t)}})}),Tt.amazonUam.enabled&&Vt&&(n=Object.values(Vt).map(function(e){return{slotID:e.code,slotName:e.slot,sizes:te(e.sizes)}}),It.makeBids(n,function(e){mt.log("[BIDS][".concat(t,"]: UAM slots "),JSON.stringify(n)),mt.log("[BIDS][".concat(t,"]: UAM bid response for all "),JSON.stringify(e)),mt.log("[TIME][".concat(t,"]: time it took for UAM bids to return"),new Date-(le()||ie())),Yt[t].aps=!0,Et(o,t)}))):Ie(function(){ee(),Ce(o)})}function jt(n){var o,i,r,e;n&&(o=Nt(),Ot(o),mt.log("[REFRESH][".concat(o,"]: Refreshing ").concat(n," at: "),new Date-(le()||ie())),i=ce(Tt),(r=Vt[n])&&(i&&i.enabled||Tt.amazonUam.enabled?(i.enabled&&nt.pushToPrebidQue(function(){var e,t;St&&St.adUnits&&((e=St.adUnits[n])&&(t=oe(r.id),e.mediaTypes&&e.mediaTypes.banner&&(e.mediaTypes.banner.sizes=t),St.adUnits[n]=e)),St.requestBids({timeout:i.timeout,adUnitCodes:[n],bidsBackHandler:function(e){var t;t=n,mt.log("[BIDS][".concat(o,"]: Prebid bid response for ").concat(t),JSON.stringify(e)),mt.log("[TIME][".concat(o,"]: time it took for Prebid bids to return"),new Date-(le()||ie())),St.setTargetingForGPTAsync([t]),Yt[o].prebid=!0,Et(t,o)}})}),Tt.amazonUam.enabled&&(e=[{slotID:r.code,slotName:r.slot,sizes:te(r.sizes)}],It.makeBids(e,function(e){mt.log("[BIDS][".concat(o,"]: UAM bid response for ").concat(r.code),JSON.stringify(e)),mt.log("[TIME][".concat(o,"]: time it took for UAM bids to return"),new Date-(le()||ie())),Yt[o].aps=!0,Et(r,o)}))):Ie(function(){Ce(n)})))}function Wt(t,e){Jt[t.code]&&clearInterval(Jt[t.code]),Jt[t.code]=setInterval(function(){var e=V.getCurrentBreakpoint();t.element&&Z(kt.document.getElementById(t.code)||t.element,50,ge(t,e))&&jt(t.code)},1e3*e)}function Bt(e){e.attributes.refresh?(mt.log("[LOAD]: Setting custom refresh time of ".concat(e.attributes.refresh," seconds for ").concat(e.code," at: "),new Date-ie()),Wt(e,e.attributes.refresh)):0===e.attributes.refresh?mt.log("[LOAD]: No refresh timer set for ".concat(e.code," at: "),new Date-ie()):Tt.refresh&&0<Tt.refresh?(mt.log("[LOAD]: Setting global refresh time of ".concat(Tt.refresh," seconds for ").concat(e.code," at: "),new Date-ie()),Wt(e,Tt.refresh)):mt.log("[LOAD]: No refresh timer exists in account settings.")}function Ut(e,t){var n=t?kt.document.getElementById(t):se(e);if(!n)return mt.warn("[SLOTS]: Could not find div with data-fuse attribute of ".concat(e));if((t=n.getAttribute("data-fuse-code"))&&Gt[t]===n)return mt.log("[SLOTS]: ".concat(e," has already with been bootstrapped and showing ad with ad slot ID ").concat(t));var o=JSON.parse(JSON.stringify(pe(n)));o&&(o.code="".concat(yt).concat(o.id,"-").concat(o.matched),K(o,n),o.attributes&&o.attributes.adblock&&ut.buildAdBlockSlots(o,n),Vt[o.code]=o,Vt[o.code].element=n,Gt[o.code]=n,Ie(function(){var e=Se(o);return At.add(o.id,e),e}),0<Tt.headerbidding&&nt.pushToPrebidQue(function(){nt.setPrebidAdUnits(o)}),Ie(function(){Pe(o)}),Bt(o),Xt.emit(Ht,o),jt(o.code))}function Rt(){mt.log("[EVENT]: resetSlots"),fe(new Date),At.purgeAll(),Gt={},Vt={},ee(),zt(),Object.keys(Tt.pageTargeting).forEach(function(e){Ie(function(){kt.googletag.pubads().clearTargeting(e.key)})}),0<Tt.headerbidding&&St&&St.adUnits&&(St.adUnits.length=0)}function Ft(){mt.log("[EVENT]: loadSlots started"),Rt();var e=de(),o=[],i=[];e.forEach(function(e){var t,n=pe(e);n&&(n.code||((n=JSON.parse(JSON.stringify(n))).code="".concat(yt).concat(n.id,"-").concat(n.matched)),K(n,e),n.attributes&&n.attributes.adblock&&ut.buildAdBlockSlots(n,e),Vt[n.code]=n,Vt[n.code].element=e,Gt[n.code]=e,i.push(n.code),o.push(n),t=V.getCurrentBreakpoint(),$(e,n,t)?(mt.log("[SLOTS]: Adding lazy listener for ".concat(n.code)),rt(e,n,function(){!function(e){mt.log("[LOAD]: Loading ".concat(e," at ").concat(new Date-(le()||ie())));var t=ae(e).getAttribute("data-fuse-code");t||mt.warn("[LOAD]: No fuseCode for fuse-slot-code of ".concat(e,", this usually means there was an error with initialisation"));var n=Lt()[t];n&&(Ie(function(){var e=Se(n);return At.add(n.id,e),e}),0<Tt.headerbidding&&nt.pushToPrebidQue(function(){nt.setPrebidAdUnits(n)}),Ie(function(){Pe(n)}),jt(n.code),Bt(n))}(n.code)})):(Ie(function(){var e=Se(n);return At.add(n.id,e),e}),0<Tt.headerbidding&&n.bids&&0<n.bids.length&&nt.pushToPrebidQue(function(){nt.setPrebidAdUnits(n)}),Ie(function(){Pe(n)}),Bt(n)))}),Xt.emit(qt,o),Ie(function(){ve(),Tt.pageTargeting.forEach(function(e){ke(e.key,e.value)}),i.length&&xt()})}var Gt={},Vt={},Jt={},Qt="onTagInitialised",qt="onSlotsInitialised",Ht="onSlotCreated",Xt=new ht([Qt,qt,Ht],function(){return mt.log.apply(mt,arguments)}),Yt={},wt=function(){return JSON.parse(JSON.stringify(Ct))},ht=function(e,t){_t.initialised?Ut(e,t):_t.onTagInitialised(function(){Ut(e,t)})};_t.getAdSlotsById=function(e){if(e&&("string"==typeof e||"number"==typeof e))return At.getSlots("".concat(e))},_t.setSlotTargetingById=function(e,t,n){!e||"string"!=typeof e&&"number"!=typeof e||At.setSlotTargetingById(e,t,n)},_t.onSlotRenderEnded=function(e){Ie(function(){return _e(e)})},_t.onTagInitialised=function(e){Xt.once(Qt,e)},_t.onSlotsInitialised=function(e){Xt.once(qt,e)},_t.onSlotInitialised=function(e){Xt.once(Ht,e)},_t.disableRefresh=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];e&&Jt[e]?(mt.log("[REFRESH]: Disabling refresh for ".concat(e)),clearInterval(Jt[e])):(mt.log("[REFRESH]: Disabling refresh for all units"),zt())},_t.setTargeting=function(n,e){var o=-1;Tt.pageTargeting.forEach(function(e,t){-1===o&&e.key===n&&(o=t)}),-1<o?(Tt.pageTargeting[o].value=e,mt.log("[LOAD]: Updating custom targeting for [key: ".concat(n,", value: ").concat(e,"]"))):(Tt.pageTargeting.push({key:n,value:e}),mt.log("[LOAD]: Adding custom targeting for [key: ".concat(n,", value: ").concat(e,"]"))),_t.initialised&&Ie(function(){mt.log("[GPT]: Setting targeting for [key: ".concat(n,", value: ").concat(e,"]")),ke(n,e)})},_t.getTargeting=function(){return Tt.pageTargeting},_t.que.push=function(e){if("function"==typeof e)try{e.call()}catch(e){mt.error("Error processing command :",e.message,e.stack)}else mt.error("Commands written into fusetag.que.push must be wrapped in a function")};function Kt(){_t.initialised?mt.log("[LOAD]: Fuse tag has been initialised, skip the remaining of the process"):(mt.log("[TIME]: time in ms it took the page to load: ",new Date-ie()),_t.loaded||(_t.loaded=!0,re().forEach(function(e){if(mt.log("[LOAD]: executing functions pushed to Fuse Queue"),"function"==typeof e)try{e.call(),e.called=!0}catch(e){mt.error("Error processing command :",e.message,e.stack)}else mt.error("Commands written into fusetag.que.push must be wrapped in a function")})),mt.log("[LOAD]: Calling loadSlots"),Ft(),Xt.emit(Qt),_t.initialised=!0,_t.states.push({initialised:!0,ts:Date.now()}))}function Zt(e){var t,n=e.disablePersonalisedAds,e=e.forceDisablePrebid;mt.log("[INIT]: disablePersonalisedAds is ".concat(n?"on":"off")),mt.log("[INIT]: forceDisablePrebid is ".concat(e?"on":"off")),n&&Ie(function(){De()}),Tt.amazonUam.enabled&&(It.load(),Pt.gdprApplies?It.applyGDPR():Pt.ccpaApplies&&It.applyCCPA(Pt.ccpaPrivacyString),It.init(ie())),e&&(Tt.headerbidding=0,Tt.prebid&&Tt.prebid.breakpoint_options&&Object.keys(Tt.prebid.breakpoint_options).forEach(function(e){Tt.prebid.breakpoint_options[e].enabled=!1})),0<Tt.headerbidding&&(nt.loadPrebidLibrary(),nt.pushToPrebidQue(function(){var e=nt.getPrebidDefaultConfig();Tt.identity.enabled&&Tt.identity.module&&(e=Tt.identity.module.configPrebid(e)),nt.setPrebidConfig(e)}),Ie(function(){kt.googletag.pubads().disableInitialLoad()}),mt.log("[LOAD]: 2. Headerbidding enabled, settings and ".concat(Tt.headerbidding,"ms timeout added"))),0<Tt.adblock&&(ut.createAdBlockObj(),ut.loadAdBlocklLibrary(),mt.log("[LOAD]: 2. Adblock has been enabled.")),Ie(function(){Te(),_e(function(e){Vt[e.slotId]?Vt[e.slotId].hasCreative=e.hasCreative:mt.log("[BIDS]: Slot Render Ended Event fired for non fuse units.")}),Ne(Vt),Oe()}),Tt.responsive&&V.watchForBreakpoints(function(e){e&&xt()}),Tt.quickstart?Kt():t=setInterval(function(){"loading"!==kt.document.readyState&&kt.googletag&&kt.googletag.apiReady&&(clearInterval(t),Kt())},10)}var $t,en;_t.init=Zt,_t.setDefaultTargeting=ve,_t.getRefreshIntervals=function(){return JSON.parse(JSON.stringify(Jt))},_t.getSlots=Lt,_t.getSettings=wt,_t.getUnits=Mt,_t.loadSlots=Ft,_t.loadSlotById=ht,_t.refreshSlots=xt,_t.refreshSlotByCode=jt,_t.resetSlots=Rt,_t.getAdSlotsByFuseId=_t.getAdSlotsById,_t.getFuseSlots=Lt,_t.getFuseSettings=wt,_t.getFuseUnits=Mt,_t.loadFuseSlots=Ft,_t.resetFuseSlots=Rt,_t.loadFuseSlotById=ht,_t.setSlotTargetingByFuseId=_t.setSlotTargetingById,_t.loaded&&mt.warn("[LOAD]: Fuse Tag was loaded more than once."),Tt.confiant&&gt.enable(),Tt.cmp&&Pt.init(),Tt.blockthrough&&ft.enable(),Tt.identity&&Tt.identity.enabled&&(Tt.identity.module||(Tt.identity.module=new bt({browserWindow:kt,userIdentityGlobal:Tt.identity.userIdentityGlobal,placementId:Tt.identity.placementId}),Tt.identity.module.setup())),mt.log("[LOAD]: 1. Fuse Tag v".concat(vt," is loaded and ready")),mt.log("[TIME]: time in ms it took Fuse to load",new Date-ie()),Ae(),we(),Tt.skip_auto_init?mt.log("[INIT]: auto init is off skip Fuse init"):Tt.cmp?(mt.log("[CONSENT]: Found IAB CMP try to check for CMP status before initiating"),$t=1,en=setInterval(function(){Pt.cmpLoaded(function(e){if(!e)return $t<20?void($t+=1):(mt.log("[CONSENT]: Cannot load CMP after 20 seconds, continue as per normal"),clearInterval(en),void Zt({disablePersonalisedAds:!1,forceDisablePrebid:!1}));mt.log("[CONSENT]: CMP loaded version ".concat(Pt.versionNumber,", checking for consent")),clearInterval(en);e=function e(t){var n=t.consentReceived,o=t.personalisedAdsConsent,i=t.googlePersonalisedAdsConsent,t=t.gdprApplies;if(!1===t){mt.log("[CONSENT]: Not in GDPR region");var r=!1,a=!1;return setTimeout(function(){if(!a)return mt.warn("[CONSENT]: USP API is not responding, continue as if not in CCPA region"),Pt.setNonPrivacyRegionsPrompt(),Zt({disablePersonalisedAds:r,forceDisablePrebid:r})},1e3),void Pt.checkForCCPA(function(e){return a=!0,e.applies?(Pt.setCCPAConsentPrompt(),Pt.setCCPA(e.applies),Pt.setPrivacyString(e.privacyString),r="Y"===e.privacyString[2].toUpperCase()):(mt.log("[CONSENT]: Not in CCPA region, continue as normal"),Pt.setNonPrivacyRegionsPrompt()),Zt({disablePersonalisedAds:r,forceDisablePrebid:r})})}if(n||!($t<20))return Pt.setGDPR(t),Pt.setGDPRConsentPrompt(),20===$t?Zt({disablePersonalisedAds:!1,forceDisablePrebid:!1}):(mt.log("[CONSENT]: ".concat(i?"[Y]":"[N]"," Google Personalised Ads")),mt.log("[CONSENT]: ".concat(o?"[Y]":"[N]"," Vendors Personalised Ads")),Zt({disablePersonalisedAds:!i,forceDisablePrebid:!o}));setTimeout(function(){$t+=1,Pt.getConsentData(e)},1e3)};Pt.getConsentData(e)})},1e3)):(mt.log("[CONSENT]: No CMP found, continue to init Fuse"),Zt(!1));Ve.getBrowserWindowObject()});
